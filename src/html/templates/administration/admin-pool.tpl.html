<div id="admin-pool">
	<h1 class="page-header"><i class="fa fa-bar-chart"></i> {{ 'reimbursement.adminPool.title' | translate }} </h1>

	<div class="row">
		<div class="col-sm-3">
			<h4 class="text-center"><span class="pre-wrap">Current State Distribution
				<br>
				(without &laquo;printed&raquo;)</span></h4>
			<div id="graph-donut-current-state-distribution"></div>
		</div>
		<div class="col-sm-3">
			<h4 class="text-center"><span class="pre-wrap">Percentage of accepted expenses
				<br>
				(Data from the last 12 months)</span></h4>
			<div id="graph-gauge-accepted-declined"></div>
		</div>
		<div class="col-sm-6">
			<h4 class="text-center"><span class="pre-wrap">Total Expense Amount in CHF
				<br>
				(Data from the year 2015)</span></h4>
			<div id="graph-line-sum-current-year"></div>
		</div>
	</div>

	<hr>

	<div class="col-sm-10 col-sm-offset-1">
		<div class="panel panel-default">
			<div class="panel-heading">
				{{ 'reimbursement.adminPool.filterPanel' | translate }}
			</div>
			<div class="panel-body">
				<form id="searchForm" class="form-horizontal">
					<div class="form-group">
						<label for="admin-pool-date" class="control-label col-sm-4"> {{ 'reimbursement.adminPool.date' | translate }} </label>
						<div class="col-sm-8">
							<div class="input-group date datepicker">
								<input type="text" id="admin-pool-date" ng-model="form.date" class="form-control">
								<span class="input-group-addon"> <span class="fa fa-calendar"></span> </span>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label for="lastName" class="col-sm-4 control-label"> {{ 'reimbursement.adminPool.userLastName' | translate }} </label>
						<div class="col-sm-8">
							<input type="text" class="form-control" id="lastName" ng-model="form.lastName">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-4 control-label"> {{ 'reimbursement.adminPool.userRole' | translate }} </label>
						<div class="col-sm-8">
							<select class="form-control" ng-model="form.role" ng-options="role as 'reimbursement.adminPool.role.'+role | translate for role in roles">
								<option selected value="">{{ 'reimbursement.adminPool.preselectedRole' | translate }}</option>
							</select>
						</div>
					</div>
					<div class="form-group">
						<label for="sapText" class="col-sm-4 control-label"> {{ 'reimbursement.adminPool.sapText' | translate }} </label>
						<div class="col-sm-8">
							<input type="text" class="form-control" id="sapText" ng-model="form.accountingText">
						</div>
					</div>
					<div class="text-right">
						<button type="submit" class="btn btn-primary" ng-click="search()">
							<i class="fa fa-arrow-circle-right"></i>
							{{ 'reimbursement.adminPool.search' | translate }}
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>

<div ng-if="searchConducted">
		<h2 class="page-header">
			{{ 'reimbursement.adminPool.searchResults' | translate }}
		</h2>

	<table class="table table-striped">
			<thead>
			<tr>
				<th>{{ 'reimbursement.dashboard.table.expenseAuthor' | translate }}</th>
				<th>{{ 'reimbursement.expense.accountingTitle' | translate }}</th>
				<th>
					<span class="tableRightMargin">{{ 'reimbursement.dashboard.table.date' | translate }}</span>
				</th>
				<th>
					<span class="tableRightMargin">{{ 'reimbursement.dashboard.table.totalCosts' | translate }}</span>
				</th>
				<th>{{ 'reimbursement.dashboard.table.status' | translate }}</th>
			</tr>
			</thead>
			<tbody>
			<tr ng-if="expenses.length < 1">
				<td colspan="99" class="text-center">{{ 'reimbursement.dashboard.table.noContent' | translate }}</td>
			</tr>
			<tr ng-repeat="e in expenses | orderBy: stateOrderingProfAdmin">
				<td>{{e.user}}</td>
				<td>{{e.accounting}}</td>
				<td>{{e.date | date:'dd.MM.yyyy'}}</td>
				<td>
					<span class="tableRightMargin">{{ e.totalAmount | currency:'CHF ':2 }}</span>
				</td>
				<td class="text-center">
					<expense-state state="e.state"></expense-state>
				</td>
			</tr>
		</tbody>
	</table>
</div>
